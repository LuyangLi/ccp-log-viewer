(window["webpackJsonpccp-log-viewer"]=window["webpackJsonpccp-log-viewer"]||[]).push([[0],{73:function(e,t,a){e.exports=a(93)},78:function(e,t,a){},81:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),i=a.n(r),c=(a(78),a(6)),l=a(13),s=a(12),d=a(15),p=a(16),u=a(14),m=a(17),g=a(3),h=a(63),f=a(5),b=a(135),v=a(136),O=a(133),y=a(134),E=a(43),j=(a(81),a(38)),x=a.n(j),w=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.container},o.a.createElement(x.a,{className:e.icon}),o.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Drag & Drop your CCP log file to load")))}}]),t}(o.a.Component),k=Object(f.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(w),N=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.container},o.a.createElement(x.a,{className:e.icon}),o.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Drag & Drop your CCP log file to load")))}}]),t}(o.a.Component),_=Object(f.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.8)",zIndex:999},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(N),S=a(58),I=a.n(S),C=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.container},o.a.createElement(I.a,{className:"".concat(e.icon," rotating-icon")}),o.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Loading...")))}}]),t}(o.a.Component),L=Object(f.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(C),R=a(59),D=a(94),F=a(127),P=a(95),z=a(129),T=a(128);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=a._getInitialState(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{selected:[]}}},{key:"_handleClickSnapshot",value:function(e,t){e.preventDefault(),console.log(t),this.props.selectLog(t._targetEventKeys),this.props.selectSnapshots([t._key]);var a="L".concat(t._targetEventKeys[0]);R.scroller.scrollTo(a,{duration:800,delay:0,smooth:"easeInOutQuart"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.className,r=t.log,i=t.selected,l=void 0===i?[]:i;console.log(l);var s=r.filter(function(e){return"GET_AGENT_SNAPSHOT succeeded."===e.text}).flatMap(function(e){return e.objects.map(function(t,a){return W({},t.snapshot,{_event:e,_key:"".concat(e._key,"-").concat(a),_date:t.snapshot.snapshotTimestamp.substring(0,10),_time:t.snapshot.snapshotTimestamp.substring(11,23),_timezone:t.snapshot.snapshotTimestamp.substring(23)})})}).map(function(e,t,a){var n=e._event._key,o=t!=a.length-1?a[t+1]._event._key:r[r.length-1]._key;return W({},e,{_targetEventKeys:Array.from(Array(o-n),function(e,t){return t+n})})});console.log(s);var d=s.reduce(function(e,t){return t._date in e?e[t._date].push(t):e[t._date]=[t],e},{});return console.log(d),o.a.createElement("div",Object(c.a)({className:"SnapshotListView"},"className",Object(g.a)(a.root,n)),o.a.createElement(D.a,{style:{height:"100%"}},o.a.createElement("div",{className:a.header},o.a.createElement("div",{className:a.headerInside},o.a.createElement(E.a,{className:a.title,variant:"h6",component:"h3"},"Snapshots"))),o.a.createElement("div",{className:a.content},o.a.createElement(F.a,{className:a.list,subheader:o.a.createElement("li",null)},Object.keys(d).map(function(t){return o.a.createElement("li",{key:"section-".concat(t),className:a.listSection},o.a.createElement("ul",{className:a.ul},o.a.createElement(T.a,null,t),d[t].map(function(t){return o.a.createElement(P.a,{button:!0,key:"item-".concat(t._key),className:Object(g.a)(a.item,Object(c.a)({},a.selected,l.includes(t._key))),onClick:function(a){return e._handleClickSnapshot(a,t)}},o.a.createElement(z.a,{primary:"".concat(t._time).concat(t._timezone," ").concat(t.state.name)}))})))})))))}}]),t}(o.a.PureComponent),$=Object(f.a)(function(e){return{root:{position:"sticky",top:e.spacing(2)},header:{position:"static",width:"100%",display:"flex",zIndex:1100,boxSizing:"border-box",flexShrink:0,flexDirection:"column",padding:e.spacing(1,2),background:"#f7f7f7"},headerInside:{position:"relative",display:"flex",alignItems:"center"},title:{flexGrow:1,display:"block"},content:{padding:e.spacing(0,0)},list:{width:"100%",height:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",padding:0,maxHeight:window.innerHeight-e.spacing(10)},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0},item:{padding:e.spacing(.5,2),display:"block"},selected:{background:"rgba(255,255,0,0.3)"}}})(G),B=a(18),M=a(131),V=a(130),U=a(137),H=a(60),J=a.n(H),K=a(138),Q=a(132),X=a(62),q=a.n(X),Y=a(61),Z=a.n(Y),ee=a(49),te=a.n(ee),ae=a(2),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=a._getInitialState(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{isMoreInfoOpen:!1}}},{key:"_toggleMoreInfo",value:function(){this.setState({isMoreInfoOpen:!this.state.isMoreInfoOpen})}},{key:"render",value:function(){var e,t,a=this,n=this.props,r=n.classes,i=n.className,l=n.event,s=n.isSelected,d=void 0!==s&&s,p=Object(ae.a)(n,["classes","className","event","isSelected"]),u=this.state.isMoreInfoOpen,m=l.exception||l.objects.length>0;return o.a.createElement("div",Object.assign({className:Object(g.a)(r.root,i)},p),o.a.createElement("div",{className:Object(g.a)(r.line,(e={},Object(c.a)(e,r.selected,d),Object(c.a)(e,r.wrror,"ERROR"===l.level),Object(c.a)(e,r.warn,"WARN"===l.level),Object(c.a)(e,r.info,"INFO"===l.level),Object(c.a)(e,r.trace,"TRACE"===l.level),Object(c.a)(e,r.debug,"DEBUG"===l.level),Object(c.a)(e,r.log,"LOG"===l.level),e))},o.a.createElement("div",{className:Object(g.a)(r.moreInfoToggle,(t={},Object(c.a)(t,r.exists,m),Object(c.a)(t,r.notExists,!m),Object(c.a)(t,r.open,u),Object(c.a)(t,r.closed,!u),t)),onClick:function(){return m&&a._toggleMoreInfo()}}),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("span",{className:r.timestamp},l.time),"\xa0",o.a.createElement("span",{className:r.component},l.component),"\xa0",o.a.createElement("span",{className:r.level},l.level),"\xa0",o.a.createElement("span",{className:r.text},l.text))),m&&u&&o.a.createElement("div",{className:Object(g.a)(r.moreInfo)},o.a.createElement(te.a,{src:l,name:!1,displayObjectSize:!1,displayDataTypes:!1})))}}]),t}(o.a.PureComponent),oe=Object(f.a)(function(e){return{root:{},line:{display:"flex",flexDirection:"row",padding:e.spacing(0,2,0,0),"&:hover":{background:"rgba(0,0,0,0.1)"},"&$error":{color:"red",fontWeight:"bold"},"&$warn":{color:"#ca9106",fontWeight:"bold"},"&$info":{color:"#005eda"},"&$trace":{color:"#616161"},"&$debug":{color:"inherit"},"&$log":{color:"#616161"},"&$selected":{background:"rgba(255,255,0,0.3)"}},moreInfoToggle:{width:e.spacing(2),textAlign:"center","&$notExists":{},"&$exists":{"&$open":{"&::after":{content:'"-"'}},"&$closed":{"&::after":{content:'"+"'}}}},component:{},timestamp:{},level:{},text:{},moreInfo:{background:"#f5f5f588",boxShadow:"inset 0px 10px 16px -10px #0000001a, inset 0px -10px 16px -10px #0000001a",padding:e.spacing(2,1),fontSize:14,zoom:.9},error:{},warn:{},info:{},trace:{},debug:{},log:{},selected:{},exists:{},notExists:{},open:{},closed:{}}})(ne),re={ERROR:{value:6,string:"error"},WARN:{value:5,string:"warn"},INFO:{value:4,string:"info"},TRACE:{value:3,string:"trace"},DEBUG:{value:2,string:"debug"},LOG:{value:1,string:"log"}},ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=a._getInitialState(),a._handleChangeLevelFilter=a._handleChangeLevelFilter.bind(Object(u.a)(a)),a._handleChangeRegexFilter=a._handleChangeRegexFilter.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{levelFilter:"LOG",regexFilter:"",moreInfoOpen:[]}}},{key:"_handleChangeLevelFilter",value:function(e){e.preventDefault(),this.setState({levelFilter:e.target.value})}},{key:"_handleChangeRegexFilter",value:function(e){e.preventDefault(),this.setState({regexFilter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.className,n=e.log,r=e.selected,i=void 0===r?[]:r,l=e.isExpanded,s=void 0!==l&&l,d=e.expand,p=this.state,u=p.levelFilter,m=p.regexFilter,h=(p.moreInfoOpen,null);try{h=""!==m?new RegExp(m):null}catch(f){console.error(f),f.message}return o.a.createElement("div",Object(c.a)({className:"LogView"},"className",Object(g.a)(t.root,a)),o.a.createElement(D.a,null,o.a.createElement("div",{className:t.header},o.a.createElement("div",{className:t.headerInside},o.a.createElement(E.a,{className:t.title,variant:"h6",component:"h3"},"Log"),o.a.createElement("div",{className:t.regexFilter},o.a.createElement("div",{className:t.searchIcon},o.a.createElement(J.a,null)),o.a.createElement(K.a,{placeholder:"Filter\u2026",value:m,onChange:this._handleChangeRegexFilter,classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"}})),o.a.createElement(V.a,{className:t.levelFilter},o.a.createElement(U.a,{value:u,onChange:this._handleChangeLevelFilter,inputProps:{name:"level",id:"level-filter"}},o.a.createElement(M.a,{value:"ERROR"},"ERROR"),o.a.createElement(M.a,{value:"WARN"},"WARN"),o.a.createElement(M.a,{value:"INFO"},"INFO"),o.a.createElement(M.a,{value:"TRACE"},"TRACE"),o.a.createElement(M.a,{value:"DEBUG"},"DEBUG"),o.a.createElement(M.a,{value:"LOG"},"LOG"))),s?o.a.createElement(Q.a,{className:t.expand,onClick:function(){return d()}},o.a.createElement(q.a,{style:{transform:"rotate(90deg)"}})):o.a.createElement(Q.a,{className:t.expand,onClick:function(){return d()}},o.a.createElement(Z.a,{style:{transform:"rotate(90deg)"}})))),o.a.createElement("div",{className:t.content},o.a.createElement("div",{className:t.rows},n.map(function(e){return re[e.level].value<re[u].value||h&&!h.exec("".concat(e.time," ").concat(e.component," ").concat(e.level," ").concat(e.text))?null:o.a.createElement(oe,{id:"L".concat(e._key),key:e._key,className:t.row,event:e,isSelected:i.includes(e._key)})})))))}}]),t}(o.a.PureComponent),ce=Object(f.a)(function(e){return{root:{},menuButton:{marginRight:e.spacing(2)},header:{position:"sticky",top:0,width:"100%",display:"flex",zIndex:1100,boxSizing:"border-box",flexShrink:0,flexDirection:"column",padding:e.spacing(1,2),background:"#f7f7f7"},headerInside:{position:"relative",display:"flex",alignItems:"center"},title:Object(c.a)({minWidth:120,display:"none"},e.breakpoints.up("sm"),{display:"block"}),regexFilter:Object(c.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(B.b)(e.palette.common.white,.45),"&:hover":{backgroundColor:Object(B.b)(e.palette.common.white,.75)},marginLeft:0,flexGrow:1,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},levelFilter:{margin:e.spacing(1),minWidth:120},expand:Object(c.a)({display:"none",minWidth:16},e.breakpoints.up("md"),{display:"inherit"}),content:{width:"auto",overflowX:"scroll",fontFamily:'"Monaco", monospace',fontSize:12,padding:e.spacing(2,0),whiteSpace:"pre",backgroundColor:"transparent",color:"#222222",fontWeight:400,outline:"none"},rows:{width:"max-content",minWidth:"100%"},row:{display:"flex",flexDirection:"column",width:"100%"}}})(ie);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state=a._getInitialState(),a.selectLog=a.selectLog.bind(Object(u.a)(a)),a.selectSnapshots=a.selectSnapshots.bind(Object(u.a)(a)),a._handleOnDrop=a._handleOnDrop.bind(Object(u.a)(a)),a._handleExpandLogView=a._handleExpandLogView.bind(Object(u.a)(a)),a._dropzoneRef=Object(n.createRef)(),window.File&&window.FileReader&&window.FileList&&window.Blob||alert("The File APIs are not fully supported in this browser."),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{isInitial:!0,isLoading:!1,isExpanded:!1,filename:null,log:[],selectedLog:[],selectedSnapshots:[]}}},{key:"componentDidMount",value:function(){}},{key:"_onLoadLog",value:function(e){this.setState({isInitial:!1,log:e.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{_key:t})}),selectedLog:[],selectedSnapshots:[]})}},{key:"selectLog",value:function(e){this.setState({selectedLog:e})}},{key:"selectSnapshots",value:function(e){this.setState({selectedSnapshots:e})}},{key:"_handleOnDrop",value:function(e){var t=this,a=new FileReader;a.onload=function(e){t._onLoadLog(JSON.parse(e.target.result))},a.onloadend=function(){t.setState({isLoading:!1})},this.setState({isLoading:!0,filename:e[0].name}),a.readAsText(e[0])}},{key:"_handleExpandLogView",value:function(){this.setState({isExpanded:!this.state.isExpanded})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isInitial,n=t.isLoading,r=t.isExpanded,i=t.filename,c=t.log,l=t.selectedLog,s=t.selectedSnapshots,d=this.props.classes;return console.log(this.state),o.a.createElement("div",{className:d.root},o.a.createElement(h.a,{ref:this._dropzoneRef,disableClick:!0,noClick:!0,onDrop:this._handleOnDrop,accept:"text/plain"},function(t){var p=t.getRootProps,u=t.isDragActive;return o.a.createElement("div",p(),o.a.createElement(O.a,{position:"static"},o.a.createElement(y.a,{variant:"dense"},o.a.createElement(E.a,{variant:"h6",color:"inherit"},"CCP Log Viewer"),o.a.createElement(E.a,{variant:"h6",color:"inherit"},i&&o.a.createElement("span",null,"\xa0:\xa0",i)))),u&&o.a.createElement(_,null),a&&!n?o.a.createElement(k,null):n?o.a.createElement(L,null):o.a.createElement(b.a,{className:d.content},o.a.createElement(v.a,{container:!0,spacing:2},o.a.createElement(v.a,{item:!0,xs:12,md:3,style:r?{display:"none"}:{}},o.a.createElement($,{log:c,selected:s,selectLog:e.selectLog,selectSnapshots:e.selectSnapshots})),o.a.createElement(v.a,{item:!0,xs:12,md:9,style:r?{minWidth:"100%",maxWidth:"100%"}:{}},o.a.createElement(ce,{log:c,selected:l,isExpanded:r,expand:e._handleExpandLogView})))))}))}}]),t}(o.a.Component),de=Object(f.a)(function(e){return{root:{flexGrow:1},content:{zIndex:2,paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},dropping:{background:"rgba(255,0,0,0.5)"}}})(se);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[73,1,2]]]);
//# sourceMappingURL=main.ffc73abc.chunk.js.map
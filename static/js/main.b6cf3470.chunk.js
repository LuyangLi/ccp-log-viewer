(window["webpackJsonpccp-log-viewer"]=window["webpackJsonpccp-log-viewer"]||[]).push([[0],{57:function(e,t,a){e.exports=a(69)},62:function(e,t,a){},65:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(62),a(7)),l=a(14),s=a(12),u=a(15),d=a(16),p=a(13),m=a(17),g=a(4),h=a(50),b=a(5),f=a(111),v=a(112),O=a(109),y=a(110),E=a(40),j=(a(65),a(34)),w=a.n(j),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.container},r.a.createElement(w.a,{className:e.icon}),r.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Drag & Drop your CCP log file to load")))}}]),t}(r.a.Component),x=Object(b.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(k),_=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.container},r.a.createElement(w.a,{className:e.icon}),r.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Drag & Drop your CCP log file to load")))}}]),t}(r.a.Component),N=Object(b.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.8)",zIndex:999},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(_),S=a(48),C=a.n(S),I=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.container},r.a.createElement(C.a,{className:"".concat(e.icon," rotating-icon")}),r.a.createElement(E.a,{className:e.text,variant:"h5",component:"h3"},"Loading...")))}}]),t}(r.a.Component),L=Object(b.a)(function(e){return{root:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},container:{width:600,height:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},icon:{fontSize:160,color:"rgba(0,0,0,0.25)"},text:{color:"rgba(0,0,0,0.5)"}}})(I),R=a(70),D=a(104),F=a(71),P=a(106),A=a(105);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state=a._getInitialState(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{selected:[]}}},{key:"_handleClickSnapshot",value:function(e,t){e.preventDefault(),console.log(t),this.props.selectLog(t._targetEventKeys),this.props.selectSnapshots([t._key])}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.log,o=t.selected,i=void 0===o?[]:o;console.log(i);var l=n.filter(function(e){return"GET_AGENT_SNAPSHOT succeeded."===e.text}).flatMap(function(e){return e.objects.map(function(t,a){return z({},t.snapshot,{_event:e,_key:"".concat(e._key,"-").concat(a),_date:t.snapshot.snapshotTimestamp.substring(0,10),_time:t.snapshot.snapshotTimestamp.substring(11,23),_timezone:t.snapshot.snapshotTimestamp.substring(23)})})}).map(function(e,t,a){var r=e._event._key,o=t!=a.length-1?a[t+1]._event._key:n[n.length-1]._key;return z({},e,{_targetEventKeys:Array.from(Array(o-r),function(e,t){return t+r})})});console.log(l);var s=l.reduce(function(e,t){return t._date in e?e[t._date].push(t):e[t._date]=[t],e},{});return console.log(s),r.a.createElement("div",{className:"SnapshotListView"},r.a.createElement(R.a,{className:a.root},r.a.createElement("div",{className:a.header},r.a.createElement("div",{className:a.headerInside},r.a.createElement(E.a,{className:a.title,variant:"h6",component:"h3"},"Snapshots"))),r.a.createElement("div",{className:a.content},r.a.createElement(D.a,{className:a.list,subheader:r.a.createElement("li",null)},Object.keys(s).map(function(t){return r.a.createElement("li",{key:"section-".concat(t),className:a.listSection},r.a.createElement("ul",{className:a.ul},r.a.createElement(A.a,null,t),s[t].map(function(t){return r.a.createElement(F.a,{button:!0,key:"item-".concat(t._key),className:Object(g.a)(a.item,Object(c.a)({},a.selected,i.includes(t._key))),onClick:function(a){return e._handleClickSnapshot(a,t)}},r.a.createElement(P.a,{primary:"".concat(t._time).concat(t._timezone," ").concat(t.state.name)}))})))})))))}}]),t}(r.a.PureComponent),W=Object(b.a)(function(e){return{root:{},header:{position:"static",width:"100%",display:"flex",zIndex:1100,boxSizing:"border-box",flexShrink:0,flexDirection:"column",padding:e.spacing(1,2),background:"#f7f7f7"},headerInside:{position:"relative",display:"flex",alignItems:"center"},title:{flexGrow:1,display:"block"},content:{padding:e.spacing(0,0)},list:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto"},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0},item:{padding:e.spacing(.5,2)},selected:{background:"rgba(255,255,0,0.3)"}}})(G),B=a(39),U=a(108),J=a(107),M=a(113),V=a(49),K=a.n(V),H=a(114),X={ERROR:{value:6,string:"error"},WARN:{value:5,string:"warn"},INFO:{value:4,string:"info"},TRACE:{value:3,string:"trace"},DEBUG:{value:2,string:"debug"},LOG:{value:1,string:"log"}},$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state=a._getInitialState(),a._handleChangeLevelFilter=a._handleChangeLevelFilter.bind(Object(p.a)(a)),a._handleChangeRegexFilter=a._handleChangeRegexFilter.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{levelFilter:"LOG",regexFilter:""}}},{key:"_handleChangeLevelFilter",value:function(e){e.preventDefault(),this.setState({levelFilter:e.target.value})}},{key:"_handleChangeRegexFilter",value:function(e){e.preventDefault(),this.setState({regexFilter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.log,n=e.selected,o=void 0===n?[]:n,i=this.state,l=i.levelFilter,s=i.regexFilter;console.log(o);var u=null;try{u=""!==s?new RegExp(s):null}catch(d){console.error(d),d.message}return r.a.createElement("div",{className:"LogView"},r.a.createElement(R.a,{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement("div",{className:t.headerInside},r.a.createElement(E.a,{className:t.title,variant:"h6",component:"h3"},"Log"),r.a.createElement("div",{className:t.regexFilter},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(K.a,null)),r.a.createElement(H.a,{placeholder:"Filter\u2026",value:s,onChange:this._handleChangeRegexFilter,classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"}})),r.a.createElement(J.a,{className:t.levelFilter},r.a.createElement(M.a,{value:l,onChange:this._handleChangeLevelFilter,inputProps:{name:"level",id:"level-filter"}},r.a.createElement(U.a,{value:"ERROR"},"ERROR"),r.a.createElement(U.a,{value:"WARN"},"WARN"),r.a.createElement(U.a,{value:"INFO"},"INFO"),r.a.createElement(U.a,{value:"TRACE"},"TRACE"),r.a.createElement(U.a,{value:"DEBUG"},"DEBUG"),r.a.createElement(U.a,{value:"LOG"},"LOG"))))),r.a.createElement("div",{className:t.content},r.a.createElement("div",{className:t.rows},a.map(function(e){return X[e.level].value<X[l].value||u&&!u.exec("".concat(e.time," ").concat(e.level," ").concat(e.text))?null:r.a.createElement("div",{key:e._key,className:Object(g.a)(t.row,(a={},Object(c.a)(a,t.rowSelected,o.includes(e._key)),Object(c.a)(a,t.rowError,"ERROR"===e.level),Object(c.a)(a,t.rowWarn,"WARN"===e.level),Object(c.a)(a,t.rowInfo,"INFO"===e.level),Object(c.a)(a,t.rowTrace,"TRACE"===e.level),Object(c.a)(a,t.rowDebug,"DEBUG"===e.level),Object(c.a)(a,t.rowLog,"LOG"===e.level),a))},r.a.createElement("span",{className:t.timestamp},e.time),"\xa0",r.a.createElement("span",{className:t.level},e.level),"\xa0",r.a.createElement("span",{className:t.text},e.text));var a})))))}}]),t}(r.a.PureComponent),q=Object(b.a)(function(e){return{root:{},menuButton:{marginRight:e.spacing(2)},header:{position:"static",width:"100%",display:"flex",zIndex:1100,boxSizing:"border-box",flexShrink:0,flexDirection:"column",padding:e.spacing(1,2),background:"#f7f7f7"},headerInside:{position:"relative",display:"flex",alignItems:"center"},title:Object(c.a)({minWidth:120,display:"none"},e.breakpoints.up("sm"),{display:"block"}),regexFilter:Object(c.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(B.b)(e.palette.common.white,.45),"&:hover":{backgroundColor:Object(B.b)(e.palette.common.white,.75)},marginLeft:0,flexGrow:1,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},levelFilter:{margin:e.spacing(1),minWidth:120},content:{width:"auto",overflowX:"scroll",fontFamily:'"Monaco", monospace',fontSize:12,padding:e.spacing(2,0),whiteSpace:"pre",backgroundColor:"transparent",color:"#222222",fontWeight:400,outline:"none"},rows:{width:"max-content"},row:{padding:e.spacing(0,2),width:"100%","&:hover":{background:"rgba(0,0,0,0.1)"}},rowError:{color:"red",fontWeight:"bold"},rowWarn:{color:"#ca9106",fontWeight:"bold"},rowInfo:{color:"#005eda"},rowTrace:{color:"#616161"},rowDebug:{color:"inherit"},rowLog:{color:"#616161"},rowSelected:{background:"rgba(255,255,0,0.3)"},timestamp:{},level:{},text:{}}})($);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state=a._getInitialState(),a.selectLog=a.selectLog.bind(Object(p.a)(a)),a.selectSnapshots=a.selectSnapshots.bind(Object(p.a)(a)),a._handleOnDrop=a._handleOnDrop.bind(Object(p.a)(a)),a._dropzoneRef=Object(n.createRef)(),window.File&&window.FileReader&&window.FileList&&window.Blob||alert("The File APIs are not fully supported in this browser."),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"_getInitialState",value:function(){return{isInitial:!0,isLoading:!1,log:[],selectedLog:[],selectedSnapshots:[]}}},{key:"componentDidMount",value:function(){}},{key:"_onLoadLog",value:function(e){this.setState({isInitial:!1,log:e.map(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{_key:t})}),selectedLog:[],selectedSnapshots:[]})}},{key:"selectLog",value:function(e){this.setState({selectedLog:e})}},{key:"selectSnapshots",value:function(e){this.setState({selectedSnapshots:e})}},{key:"_handleOnDrop",value:function(e){var t=this,a=new FileReader;a.onload=function(e){t._onLoadLog(JSON.parse(e.target.result))},a.onloadend=function(){t.setState({isLoading:!1})},this.setState({isLoading:!0}),a.readAsText(e[0])}},{key:"render",value:function(){var e=this,t=this.state,a=t.isInitial,n=t.isLoading,o=t.log,i=t.selectedLog,c=t.selectedSnapshots,l=this.props.classes;return console.log(this.state),r.a.createElement("div",{className:l.root},r.a.createElement(h.a,{ref:this._dropzoneRef,disableClick:!0,noClick:!0,onDrop:this._handleOnDrop,accept:"text/plain"},function(t){var s=t.getRootProps,u=t.isDragActive;return r.a.createElement("div",s(),r.a.createElement(O.a,{position:"static"},r.a.createElement(y.a,{variant:"dense"},r.a.createElement(E.a,{variant:"h6",color:"inherit"},"CCP Log Viewer"))),u&&r.a.createElement(N,null),a&&!n?r.a.createElement(x,null):n?r.a.createElement(L,null):r.a.createElement(f.a,{className:l.content},r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,xs:12,md:3},r.a.createElement(W,{log:o,selected:c,selectLog:e.selectLog,selectSnapshots:e.selectSnapshots})),r.a.createElement(v.a,{item:!0,xs:12,md:9},r.a.createElement(q,{log:o,selected:i})))))}))}}]),t}(r.a.Component),Z=Object(b.a)({root:{flexGrow:1},content:{zIndex:2,paddingTop:16,paddingBottom:16},dropping:{background:"rgba(255,0,0,0.5)"}})(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[57,1,2]]]);
//# sourceMappingURL=main.b6cf3470.chunk.js.map